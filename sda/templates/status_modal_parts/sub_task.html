{# sda/templates/status_modal_parts/sub_task.html #}
<div class="bg-gray-50 dark:bg-gray-700 shadow-md rounded-lg p-4">
    <div class="flex items-center justify-between mb-2">
        <div class="flex items-center">
            <span class="mr-2">
                {% if task.status == 'running' %}<i class="fas fa-sync fa-spin text-blue-500"></i>
                {% elif task.status == 'completed' %}<i class="fas fa-check-circle text-green-500"></i>
                {% elif task.status == 'pending' %}<i class="fas fa-hourglass-start text-yellow-500"></i>
                {% else %}<i class="fas fa-times-circle text-red-500"></i>
                {% endif %}
            </span>
            <span class="font-medium text-gray-800 dark:text-gray-200">{{ task.name }}</span>
        </div>
        <span class="text-xs px-2 py-0.5 rounded-full
            {% if task.status == 'running' %}bg-blue-100 text-blue-700 dark:bg-blue-600 dark:text-blue-100
            {% elif task.status == 'completed' %}bg-green-100 text-green-700 dark:bg-green-600 dark:text-green-100
            {% elif task.status == 'failed' %}bg-red-100 text-red-700 dark:bg-red-600 dark:text-red-100
            {% elif task.status == 'pending' %}bg-yellow-100 text-yellow-700 dark:bg-yellow-600 dark:text-yellow-100
            {% else %}bg-gray-100 text-gray-700 dark:bg-gray-500 dark:text-gray-100
            {% endif %}">
            {{ task.status }}
        </span>
    </div>

    {{ progress_bar_html|safe }} {# Rendered progress_bar.html passed here #}

    {% if task.details %}
    <div class='mt-3 bg-gray-100 dark:bg-gray-600 p-3 rounded text-xs'>
        <p class="font-semibold text-gray-700 dark:text-gray-300 mb-1">Details:</p>
        <ul class="list-disc list-inside pl-2 space-y-0.5">
            {% for k, v in task.details.items()|sort %}
            <li class="text-gray-600 dark:text-gray-400"><strong class="font-medium text-gray-700 dark:text-gray-300">{{ k }}:</strong> {{ v }}</li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}
</div>
