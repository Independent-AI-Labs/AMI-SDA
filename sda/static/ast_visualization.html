<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AST Visualization</title>
    <!-- 1. Link to Prism.js CSS (using a CDN theme for simplicity, choose one you like) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-okaidia.min.css"
          integrity="sha512-mIs9kKbaw6JZFfSuo+EdoTJXqJZYhAgzz+HTO09JkG4SYKdB9rL7nKxP/cxjOsCq0V0T3hJMKp2vQn9aC+j/wA=="
          crossorigin="anonymous" referrerpolicy="no-referrer" />
    <style>
        body { font-family: sans-serif; margin: 0; background-color: #f0f0f0; }
        .ast-node {
            border: 1px solid #ccc;
            padding: 8px;
            margin: 4px 0 4px 20px; /* Default left margin for indentation */
            background-color: #fff;
            border-radius: 4px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            font-size: 0.9em;
        }
        .ast-node-header {
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
            font-size: 0.95em;
        }
        .ast-node-header .node-type { color: #007bff; }
        .ast-node-header .node-name { color: #28a745; }
        .ast-node-header .node-lines { color: #6c757d; font-size: 0.9em; }

        .ast-node-code-container {
            margin-top: 5px;
            background-color: #272822; /* okaidia theme background */
            border-radius: 4px;
            padding: 10px;
            overflow-x: auto;
        }
        /* Styling for <pre> and <code> tags that Prism.js will use */
        pre[class*="language-"] {
            margin: 0;
            padding: 0 !important; /* Override default Prism padding if it conflicts */
            background: transparent !important; /* Inherit from .ast-node-code-container */
            font-size: 0.85em;
            white-space: pre-wrap;   /* Wrap long lines */
            word-break: break-all; /* Break words if they are too long */
        }
        code[class*="language-"] {
            font-family: 'Courier New', Courier, monospace;
            color: #f8f8f2; /* Default text color for okaidia */
        }
        .ast-tooltip {
            position: absolute;
            visibility: hidden;
            background-color: black;
            color: white;
            padding: 5px;
            border-radius: 3px;
            z-index: 1000;
            font-size: 0.8em;
        }
        #ast-visualization-container {
            padding: 10px;
            height: calc(100vh - 20px); /* Full viewport height minus padding */
            overflow-y: auto;
        }
        .loading-message, .error-message {
            text-align: center;
            padding: 20px;
            font-size: 1.1em;
        }
        .error-message { color: red; }
    </style>
</head>
<body>
    <div id="ast-visualization-container">
        <div class="loading-message">Loading AST data...</div>
    </div>

    <!-- 2. Link to Prism.js Core -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"
            integrity="sha512-9khQRAUBYEJDCDVP2yw3LRUQvjJ0Pjx0EShmaQjcHa6AXiOv6qHQu9lCAIR8O+/D8FtaCoJ2c0Tf9Xo7hYH01Q=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- 3. Link to Autoloader (recommended for loading languages on demand) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"
            integrity="sha512-SkmBfuA2hqjzEVpmnMt/LINrjvdMhQc66P29M3XHhLhP47s7R7GqRgyS+177u5s0W4rPjLrT5xM43gR/3CVSO_g=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- 4. Link to our custom AST viewer script -->
    <script src="/static/js/ast_viewer.js"></script>
</body>
</html>
